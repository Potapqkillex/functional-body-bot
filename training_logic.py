def parse_training_command(user_text):
    user_text = user_text.lower()

    goal = None
    place = None

    goals = ["гибкость", "сила", "выносливость", "всё тело", "растяжка", "мобилити"]
    places = ["дом", "зал", "улица"]

    for g in goals:
        if g in user_text:
            goal = g
            break

    for p in places:
        if p in user_text:
            place = p
            break

    return goal, place


def generate_training(goal, place):
    if not goal or not place:
        return "Сформулируй цель и место тренировки. Например: «Хочу силовую на улице»."

    if goal == "гибкость":
        return f"""Тренировка на гибкость ({place}):
1. Круговые вращения суставов — 2 мин
2. Складка вперёд стоя — 3×30 сек
3. Бабочка сидя — 3×30 сек
4. Поза голубя — 3×30 сек на каждую сторону
5. Поза щенка — 3×30 сек
6. Дыхание в растяжении — 5 мин"""

    if goal == "сила":
        return f"""Силовая тренировка ({place}):
1. Приседания × 20
2. Отжимания × 15
3. Планка — 1 мин × 3
4. Выпады × 12 на ногу
5. Берпи × 10
6. Повторить круг 3 раза"""

    if goal == "выносливость":
        return f"""Выносливость ({place}):
1. Прыжки на месте — 1 мин
2. Бёрпи × 15
3. Бег на месте с высоким подниманием колен — 1 мин
4. Приседания × 20
5. Отжимания × 15
6. 3–5 кругов без отдыха"""

    if goal == "всё тело":
        return f"""Функционал на всё тело ({place}):
1. Присед + прыжок — 3×15
2. Отжимания — 3×20
3. Планка с касанием плеч — 3×20
4. Альпинист — 3×30 сек
5. Ягодичный мостик — 3×20
6. Заминка — дыхание 5 мин"""

    if goal == "растяжка":
        return f"""Стретчинг ({place}):
1. Кошка-корова — 2 мин
2. Поза ребёнка — 3×30 сек
3. Поза голубя — 3×30 сек
4. Наклон к прямой ноге сидя — 3×30 сек
5. Бабочка — 3×30 сек"""

    if goal == "мобилити":
        return f"""Мобилити ({place}):
1. Скручивания лежа — 3×10
2. Плечевые круги с палкой — 3×20
3. Приседания с удержанием внизу — 3×1 мин
4. Переходы из планки в собаку мордой вниз — 3×10"""

    return "Не удалось распознать запрос. Попробуй ещё раз."